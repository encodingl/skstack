{% extends 'base.html' %}
{% block content %}
<head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>skipper-配置目录增删改查</title>
    <link rel="stylesheet" href="http://cdn.static.runoob.com/libs/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="http://cdn.static.runoob.com/libs/jquery/2.1.1/jquery.min.js"></script>
    <script src="http://cdn.static.runoob.com/libs/bootstrap/3.3.7/js/bootstrap.min.js"></script>
</head>


  <div class="content-wrapper">
    <!-- Content Header (Page header) -->
    <section class="content-header">

    </section>

    <!-- Main content -->
    <section class="content">
       <div class="btn-group">
		 <button class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal">添加</button>
       </div>

      <!-- Your Page Content Here -->
  <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                    &times;
                </button>
                <h4 class="modal-title" id="myModalLabel">
                    配置目录管理
                </h4>
            </div>
            <form id="form_data">
            <div class="modal-body">
                添加配置目录: <input type="text" id="dirname" name="dirname"/>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">关闭
                </button>
                <button type="button" onclick="add_info()" class="btn btn-primary">
                    提交更改
                </button>
            </div>
            </form>
        </div><!-- /.modal-content -->
    </div><!-- /.modal -->
   </div>
    <!--显示新增目录-->
   <div>
	  <table class="table table-striped table-bordered" id="datasform">
       <caption>
              <div align="center"><h2>维护目录</h2></div>
       </caption>
       <thead>
         <tr>
         <th><input type="checkbox" onclick="checkAll(this, 'item1');" /></th>
         <th>目录名称</th>
         </tr>
       </thead>
       <tbody>
          {% csrf_token %}
          {% if dirmanager %}
          {% for dir in dirmanager %}
             <tr class="even gradeX">
                <td><input type="checkbox" id="dir_id" class="item1" value="{{ i.id }}" name="id" /></td>
                <td>{{dir}}</td>
             </tr>
          {% endfor %}
          {% endif %}
      </table>
   </div>
    </section>
    <!-- /.content -->
  </div>

<script>

    // 添加入库操作
    function add_info(){
        var data = $("#form1").serializeArray(); //自动将form表单封装成json
        alert(JSON.stringify(data));
        //定义form_data的字符类型，避免乱码产生
        var form_data = 'multipart/form-data;charset=UTF-8';
        //获取input中输入的内容组成数组对象
        var form_data = $('#form_data').serializeArray();
        //alert(JSON.stringify(form_data));
        $.ajax({
        type: 'POST',
        url:'/skfile/dir_add',
        data:form_data,
        success: function( data_get ){
         }
        });

    }


</script>
{% endblock %}