{% extends 'base.html' %}
{% block content %}

<div class="content-wrapper">
    <!-- Content Header (Page header) -->
    <section class="content-header">
    </section>


<!--contentx-->
<div id="myTabContent" class="tab-content">

	<div class="tab-pane fade in active" id="1">
      <br>
	  <div>
	  <table class="table table-striped table-bordered" id="datasform">
       <caption>
               <div class="col-sm-2"style="margin-top:15px">
                  <a href="{% url 'rota_add' %}"><li class="btn btn-success" style="width: 100pt;font-size: medium" ><b>添加</b></li></a>
               </div>
	           <div class="col-sm-offset-2 col-sm-6">
               <h2>运维值班信息编辑</h2></div>
       </caption>
       <thead>
         <tr>
         <th><input type="checkbox" onclick="checkAll(this, 'item1');" /></th>
         <th>序号</th>
         <th>值班人员</th>
         <th>值班人员联系方式</th>
         <th>是否轮值</th>
         <th>轮值顺序</th>
         <th>是否为紧急联系人</th>
         <th>是否需要电话值班</th>
         <th></th>
         </tr>
       </thead>
       <tbody>
          {% if rota %}
          {% for i in rota %}
             <tr class="even gradeX">
                <td><input type="checkbox" id="rota_id" class="item1" value="{{ i.id }}" name="id" /></td>
                <td><span class="numberClass"></span></td>
                <td>{{i.name.nickname}}</td>
                <td>{{i.iphone}}</td>
                <td>{{i.spell}}</td>
                <td>{{i.rota_number}}</td>
                <td>{{i.emergency_contact}}</td>
                <td>{{i.iphone_rota}}</td>
                <td>
                  <a href="{% url 'rota_edit' i.id %}"><span class="btn btn-sm btn-info">编辑</span></a>
                  <a href="{% url 'rota_delete' i.id %}" onclick="return confirm('确认删除吗？？')"><span class="btn btn-sm btn-danger ">删除</span></a>
                </td>
             </tr>
          {% endfor %}
          {% endif %}
      </table>
	</div>
	</div>
</div>

</section>
</div>
<script>
function checkAll(sender, checkClass) {
    var checkItems = document.getElementsByTagName('input');
    for (var i = 0; i < checkItems.length; i++) {
        var checkItem = checkItems[i];
        if (checkItem.type === 'checkbox' && checkItem.className === 'item1') {
            checkItem.checked = sender.checked;
        }
    }
}
function checkSubmit() {
    if (!confirm("确定删除？")) {
        window.event.returnValue = false;
    }
}
$(function(){
function number(){
for(var i=0;i< $(".numberClass").length;i++){
$(".numberClass").get(i).innerHTML =i+1;
}
}
number();
});
</script>
<script>
     $(document).ready(function(){
     $('.loading').fadeOut();
});
</script>

{% endblock %}
