{% extends 'base.html' %}
{% block self_head_css_js %}
    <script src="/static/layer/layer.js"></script>
{#    <script>window.CKEDITOR_BASEPATH = '/static/ckeditor/ckeditor/';</script>#}
{% endblock %}
{% block content %}



<div class="content-wrapper">
    <!-- Content Header (Page header) -->
    <section class="content-header">
    </section>


  <!-- Main content -->
    <section class="content">

        <div class="box">
            <!-- /.box-header -->
            <div class="box-header">
                    <caption>
                      <div class="col-sm-2"style="margin-top:15px">
                          <a href="{% url 'event_add' %}"><li class="btn btn-success" style="width: 100pt;font-size: medium" ><b>添加</b></li></a>
                       </div>
                       <div class="col-sm-offset-2 col-sm-6"><h2>运维流程编辑</h2></div>
                    </caption>
            </div>


            <div class="box-body">
                <table class="table table-striped table-bordered" id="eventform">
                    <thead>
                         <tr>
                             <th><input type="checkbox" onclick="checkAll(this, 'item1');" /></th>
                             <th>等级</th>
                             <th>响应时间</th>
                             <th>跟进人员</th>
                             <th>处理问题和升级流程</th>
                             <th>参与人员</th>
                             <th class="text-center">操作</th>
                         </tr>
                    </thead>
                    <tbody>
                          {% if events %}
                              {% for i in events %}
                                 <tr class="even gradeX">
                                    <td><input type="checkbox" id="events_id" class="item1" value="{{ i.id }}" name="id" /></td>
                                    <td>{{i.level}}</td>
                                    <td>{{i.responsetime}}</td>
                                    <td>{{i.processingpersonnel}}</td>
                                    <td>{{i.event}}</td>
                                    <td>{{i.participant}}</td>
                                    <td class="text-center" data-editable='false'>
                                      <a href="{% url 'event_edit' i.id %}"><span class="btn btn-sm btn-info">编辑</span></a>
                                      <a href="{% url 'event_delete' i.id %}" onclick="return confirm('确认删除吗？？')"><span class="btn btn-sm btn-danger ">删除</span></a>
                                    </td>
                                 </tr>
                              {% endfor %}
                          {% endif %}
                    </tbody>
               </table>
            </div>
        </div>
    </section>
</div>





<input id="handle_status" value="" hidden="hidden">

<script src="/static/plugins/datatables/jquery.dataTables.min.js"></script>
<script src="/static/plugins/datatables/dataTables.bootstrap.min.js"></script>
<script>
function checkAll(sender, checkClass) {
    var checkItems = document.getElementsByTagName('input');
    for (var i = 0; i < checkItems.length; i++) {
        var checkItem = checkItems[i];
        if (checkItem.type === 'checkbox' && checkItem.className === 'item1') {
            checkItem.checked = sender.checked;
        }
    }
}
function checkSubmit() {
    if (!confirm("确定删除？")) {
        window.event.returnValue = false;
    }
}
$(function(){
function number(){
for(var i=0;i< $(".numberClass").length;i++){
$(".numberClass").get(i).innerHTML =i+1;
}
}
number();
});
</script>
<script>
     $(document).ready(function(){
     $('.loading').fadeOut();
});
</script>

{% endblock %}
